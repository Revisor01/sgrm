<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ release.tag_name }} - {{ release.repo }}</title>
    <link rel="stylesheet" href="/static/releases.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>{{ release.repo }}</h1>
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Theme wechseln"></button>
        </div>
    </header>

    <main>
        <div class="container">
            <a href="/releases" class="back-link">← Alle Releases</a>

            <article class="detail">
                <div class="detail-header">
                    <span class="version">{{ release.tag_name }}</span>
                    <span class="meta">{{ release.relative_time }}</span>
                    {% if release.author %}
                    <span class="meta">
                        {% if release.author_avatar %}
                        <img src="{{ release.author_avatar }}" alt="{{ release.author }}">
                        {% endif %}
                        {{ release.author }}
                    </span>
                    {% endif %}
                    <a href="{{ release.html_url }}" target="_blank" class="github-link">Auf GitHub ansehen</a>
                </div>

                {% if release.name and release.name != release.tag_name %}
                <h2 class="detail-title">{{ release.name }}</h2>
                {% endif %}

                <div class="detail-body">
                    {% if release.body_html %}
                    {{ release.body_html | safe }}
                    {% else %}
                    <p class="no-description">Keine Beschreibung vorhanden.</p>
                    {% endif %}
                </div>

                {% if release.assets %}
                <section class="assets">
                    <h3>Downloads</h3>
                    <div class="assets-list">
                        {% for asset in release.assets %}
                        <a href="{{ asset.download_url }}" class="asset" target="_blank">
                            <span class="asset-name">{{ asset.name }}</span>
                            <span class="asset-meta">{{ asset.size_formatted }} · {{ asset.download_count }} Downloads</span>
                        </a>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}
            </article>
        </div>
    </main>

    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const newTheme = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }
        const saved = localStorage.getItem('theme');
        if (saved === 'dark') document.documentElement.setAttribute('data-theme', 'dark');
    </script>
</body>
</html>
